{"version":3,"sources":["./src/app/modules/order-lazy/order-routing.module.ts","./src/app/modules/order-lazy/order.module.ts","./src/app/orders/order.component.ts","./src/app/orders/order.component.html","./src/app/services/order.service.ts"],"names":[],"mappings":"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","file":"src_app_modules_order-lazy_order_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { OrderComponent } from '../../orders/order.component';\r\nimport { AuthGuard } from 'src/app/services/auth-guard.service';\r\nimport { AdminAuthGuard } from 'src/app/services/admin-auth-guard.service';\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: OrderComponent, canActivate: [AuthGuard] },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class OrderRoutingModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { OrderRoutingModule } from './order-routing.module';\r\nimport { OrderComponent } from '../../orders/order.component';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { MaterialModule } from 'src/app/Material/Material.module';\r\nimport { CategoryService } from 'src/app/services/category.service';\r\nimport { UtilityService } from 'src/app/services/utility.service';\r\nimport { OrderService } from 'src/app/services/order.service';\r\nimport { ProductFilterModule } from '../product-filter/product-filter.module';\r\n\r\n@NgModule({\r\n  declarations: [OrderComponent],\r\n  imports: [\r\n    CommonModule,\r\n    OrderRoutingModule,\r\n    FormsModule,\r\n    MaterialModule,\r\n    ReactiveFormsModule,\r\n    ProductFilterModule\r\n  ],\r\n  providers: [CategoryService, UtilityService, OrderService],\r\n})\r\nexport class OrderModule { }\r\n","import { Component, OnInit, OnDestroy, HostListener } from '@angular/core';\r\nimport { ActivatedRoute, Router} from '@angular/router';\r\nimport { Observable, Subscription } from 'rxjs';\r\nimport { ProductService } from '../services/product.service';\r\nimport { Sort } from '@angular/material/sort';\r\nimport { OrdersService } from '../services/orders.service';\r\nimport { FormControl } from '@angular/forms';\r\nimport { map, startWith } from 'rxjs/operators';\r\nimport { AppUser } from '../models/app-user';\r\nimport { AuthService } from '../services/auth.service';\r\nimport { UtilityService } from '../services/utility.service';\r\nimport { OrderService } from '../services/order.service';\r\n\r\n@Component({\r\n  selector: 'order',\r\n  templateUrl: './order.component.html',\r\n  styleUrls: ['./order.component.scss']\r\n})\r\nexport class OrderComponent implements OnInit, OnDestroy {\r\n\r\n  appUser: AppUser;\r\n\r\n  //paginator\r\n  actualPage: number = 0;\r\n  totalPages: number = 1;\r\n  itemsPerPage: number = 10;\r\n  //paginator bootstrap\r\n  currentItemsToShow: any[] = [];\r\n\r\n  myControl = new FormControl();\r\n  filteredOptions:  Observable<any[]>;\r\n  disableSelect = new FormControl(false);\r\n  filtrada: any[];\r\n\r\n  fantasyName:string=\"\";\r\n  clientCategory: string | null;\r\n  date: any;\r\n\r\n  clients:any[] = [];\r\n  filteredClients:any[];\r\n  showedProducts:any;\r\n  prodsCategory: string | null;\r\n  orderProducts:any[] = []\r\n  filteredOrder: any;\r\n  prodQuery: string;\r\n  order: any;\r\n  orderIndex: number;\r\n  OrderId: any;\r\n  disc: number = 0;\r\n  iva: number = 21;\r\n  ivas: number[] = [0, 10.5, 21];\r\n\r\n  title: string;\r\n  quantity: number = 0;\r\n  sortedData: any[];\r\n  client: boolean = true;\r\n  orderEmpty: boolean = false;\r\n  mobile:boolean;\r\n  aproved: boolean = true;\r\n  negative: boolean = false;\r\n  noStock: boolean = false;\r\n  showOrder: boolean = false;\r\n  catNull: boolean = false;\r\n\r\n  query: {client: string, seller: string, date: string, dateRange: {start: Date, end: Date}} = {client: \"\", seller: \"\", date: \"\", dateRange: {start: new Date(2017, 1, 1), end: new Date(2040, 1, 1)}}\r\n  subscription: Subscription;\r\n  subscription2: Subscription;\r\n  subscription3: Subscription;\r\n  subscription4: Subscription;\r\n  subscription5: Subscription;\r\n\r\n\r\n  constructor(\r\n    private productService: ProductService,\r\n    private route: ActivatedRoute,\r\n    public ordersService: OrdersService,\r\n    private orderService: OrderService,\r\n    private auth: AuthService,\r\n    private router: Router,\r\n    public utilityService: UtilityService\r\n  ) {\r\n\r\n    // this.order = this.ordersService.getOrder();\r\n  }\r\n\r\n  ngOnInit(){\r\n    this.subscription = this.orderService.getOrderNumber().subscribe(orderNumber => {\r\n      if (!orderNumber) this.orderService.createOrderNumber();\r\n      this.orderService.orderNumber = orderNumber;\r\n    });\r\n\r\n    this.subscription2 = this.auth.appUser$.subscribe(appUser => {\r\n      this.appUser = appUser;\r\n      this.orderIndex = this.orderService.orderIndex;\r\n      this.subscription3 = this.orderService.getOrder().subscribe(order => {\r\n        this.orderService.clearOrder();\r\n        this.order = order;\r\n        if (this.order.length == 0) this.orderService.createOrderEmpty();\r\n\r\n        this.orderIndex = -1\r\n        for (let i=0;i<this.order.length;i++) {\r\n          if (this.appUser && this.order[i].payload.val().sellerName == this.appUser.name) {\r\n            this.orderIndex = i\r\n            this.orderProducts = this.order[this.orderIndex].payload.val().products;\r\n            break\r\n          }\r\n        }\r\n        if (this.appUser && this.orderIndex == -1) {\r\n          this.orderService.createOrderEmpty();\r\n        }\r\n\r\n        this.subscription4 = this.ordersService.getAllClients().subscribe(clients => {\r\n          this.filteredClients = clients;\r\n          this.clients = [];\r\n          for (let i=0;i<this.filteredClients.length;i++) {\r\n            if (this.filteredClients[i].payload.val().designatedSeller == this.appUser.name || this.appUser?.isAdmin == true)  {\r\n              this.clients.push(this.filteredClients[i]);\r\n            }\r\n          }\r\n          this.filteredOptions = this.myControl.valueChanges.pipe(startWith(''),\r\n          map(value =>  value? this._filter(value) : this._filter(\"\"))\r\n          )\r\n        });\r\n\r\n        this.subscription5 = this.route.queryParamMap.subscribe(params => {\r\n          this.prodsCategory = params.get('prodsCategory');\r\n          this.filteredOrder = [];\r\n          if (this.orderIndex>=0 && this.order[0]) {\r\n            for (let i=0;i<this.order[this.orderIndex].payload.val().products.length;i++) {\r\n              if (this.order[this.orderIndex].payload.val().products[i].product.prodsCategory == this.prodsCategory)  {\r\n                this.order[this.orderIndex].payload.val().products[i].quantity = this.orderProducts[i].quantity;\r\n                this.filteredOrder.push(this.orderProducts[i]);\r\n              }\r\n            }\r\n            if (this.filteredOrder.length == 0) {\r\n              for (let i=0;i<this.order[this.orderIndex].payload.val().products.length;i++) {\r\n                this.filteredOrder.push(this.order[this.orderIndex].payload.val().products[i]);\r\n              }\r\n            }\r\n          }\r\n          this.showedProducts = this.filteredOrder;\r\n          if (!this.prodsCategory) this.showedProducts = this.orderProducts;\r\n          this.actualPage = 0;\r\n          this.refreshPages();\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  pickClient(clientCategory: string) {\r\n    // if(!this.clientCategory) {\r\n    //   this.catNull = true;\r\n    //   setTimeout(()=>{\r\n    //     this.catNull = false;\r\n    //   }, 2000)\r\n    // }\r\n\r\n    let price;\r\n    let products = [];\r\n    if (!this.orderProducts) return\r\n    for (let i=0;i<this.orderProducts.length;i++) {\r\n      // switch (this.clientCategory) {\r\n        switch (clientCategory) {\r\n        case null:\r\n          // this.orderProducts[i].price = this.orderProducts[i].product.discPrice1;\r\n          // this.orderProducts[i].discountPrice = this.orderProducts[i].product.discPrice1*(1-this.orderProducts[i].discount/100) ;\r\n          throw Error(\"Error en el canal de venta\");\r\n            break;\r\n        case \"Distribuidor\":\r\n          this.orderProducts[i].price = this.orderProducts[i].product.discPrice1;\r\n          this.orderProducts[i].discountPrice = this.orderProducts[i].product.discPrice1*(1-this.orderProducts[i].discount/100) ;\r\n          break;\r\n        case \"Comercio\":\r\n          this.orderProducts[i].price = this.orderProducts[i].product.discPrice2;\r\n          this.orderProducts[i].discountPrice = this.orderProducts[i].product.discPrice2*(1-this.orderProducts[i].discount/100) ;\r\n          break;\r\n        case \"Kiosko\":\r\n          this.orderProducts[i].price = this.orderProducts[i].product.discPrice3;\r\n          this.orderProducts[i].discountPrice = this.orderProducts[i].product.discPrice3*(1-this.orderProducts[i].discount/100) ;\r\n          this.iva = 0;\r\n          break;\r\n        case \"Gimnasio\":\r\n          this.orderProducts[i].price = this.orderProducts[i].product.discPrice4;\r\n          this.orderProducts[i].discountPrice = this.orderProducts[i].product.discPrice4*(1-this.orderProducts[i].discount/100) ;\r\n          this.iva = 0;\r\n          break;\r\n      }\r\n    }\r\n    this.showedProducts = this.orderProducts;\r\n    if (this.fantasyName) this.router.navigateByUrl('/orders/order');\r\n\r\n  }\r\n\r\n  sortData(sort: Sort) {\r\n    const data = this.showedProducts;\r\n    if (!sort.active || sort.direction === '') {\r\n      this.sortedData = data;\r\n      return;\r\n    }\r\n\r\n    this.sortedData = data.sort((a: any, b: any) => {\r\n      const isAsc = sort.direction === 'asc';\r\n      switch (sort.active) {\r\n        case 'title': return this.compare(a.product.title, b.product.title, isAsc);\r\n        case 'quantity': return this.compare(a.quantity, b.quantity, isAsc);\r\n        case 'unitPrice': return this.compare(a.discountPrice, b.discountPrice, isAsc);\r\n        case 'totalPriceProduct': return this.compare(a.discountPrice*a.quantity, b.discountPrice*b.quantity, isAsc);\r\n\r\n        default: return 0;\r\n      }\r\n    });\r\n  }\r\n\r\n  getTitle(item: any) {\r\n    return item.title;\r\n  }\r\n\r\n  getQuantity(item: any) {\r\n    if (!this.order) return 0;\r\n    for (let i=0;i<this.order[this.orderIndex].payload.val().products.length;i++) {\r\n      if (this.order[this.orderIndex].payload.val().products[i].product.title == item.title) return this.order[this.orderIndex].payload.val().products[i].quantity;\r\n    }this.clients\r\n    return 0;\r\n  }\r\n\r\n  compare(a: number | string, b: number | string, isAsc: boolean) {\r\n    return (a < b ? -1 : 1) * (isAsc ? 1 : -1);\r\n  }\r\n\r\n  private _filter(value: any): any {\r\n    this.clientCategory = null;\r\n    const filterValue = value.toLowerCase();\r\n    if (!this.clients) return;\r\n    let listFiltrada = this.clients.filter(client => client.payload.val().fantasyName.toLowerCase().includes(filterValue));\r\n    if (listFiltrada.length > 0) {\r\n      this.clientCategory = listFiltrada[0].payload.val().clientCategory;\r\n      this.pickClient(this.clientCategory!)\r\n    }\r\n    return listFiltrada\r\n  }\r\n\r\n  filter(prodQuery: string) {\r\n    this.prodQuery = prodQuery;\r\n    if (prodQuery=='') {\r\n      // this.showedProducts = this.filteredOrder;\r\n      this.showedProducts = this.orderProducts;\r\n      return\r\n    }\r\n    this.showedProducts = (prodQuery) ?\r\n    this.showedProducts.filter((p: any) => p.product.title.toLowerCase().includes(prodQuery.toLowerCase())) :\r\n    this.showedProducts;\r\n    this.actualPage = 0;\r\n    this.refreshPages();\r\n  }\r\n\r\n  updateOrderItemQuantity(product: any, quantityChange: number, index: number){\r\n    for (let i=0;i<this.orderProducts.length;i++) {\r\n      if (product.product.title == this.orderProducts[i].product.title) {\r\n        if (this.orderProducts[i].quantity + quantityChange < 0) return;\r\n        if (this.orderProducts[i].quantity + quantityChange > this.orderService.getStock(product) ) {\r\n          this.noStock = true;\r\n          setTimeout(()=> {\r\n            this.noStock = false;\r\n           }, 2000);\r\n          return;}\r\n          //cartProducts[i].quantity += quantityChange;\r\n          this.orderProducts[i].quantity += quantityChange;\r\n        break\r\n      }\r\n    }\r\n    this.quantity += quantityChange;\r\n  }\r\n\r\n  orderProductsLength() {\r\n    let result = 0;\r\n    for (let i=0;i<this.orderProducts.length;i++) {\r\n      if (this.orderProducts[i].quantity > 0) {\r\n        result++;\r\n      }\r\n    }\r\n    return result\r\n  }\r\n\r\n   // buscarUsuario(criterio: string) {\r\n    //   for (const usuario of this.tuServicio.usuarios) {\r\n    //     if (usuario.algunAtributo === criterio) {\r\n    //       const mensajeId = usuario.mensajeId;\r\n    //       const mensaje = this.tuServicio.getMensajes().find(m => m.id === mensajeId);\r\n    //       return mensaje;\r\n    //     }\r\n    //   }\r\n    //   return null; // si no se encuentra el usuario o el mensaje, devuelve null\r\n    // }\r\n\r\n  beforeShowOrder() {\r\n    if (!this.orderService.isStock(this.order[this.orderIndex])) {\r\n      this.noStock = true;\r\n      setTimeout(()=> {\r\n        this.noStock = false;\r\n        }, 2000);\r\n      return\r\n    }\r\n    this.orderEmpty = true;\r\n    for (let i=0;i<this.orderProducts.length;i++) {\r\n      if (this.orderProducts[i].quantity != 0) {\r\n        this.orderEmpty = false;\r\n      }\r\n    }\r\n    if (this.orderEmpty) {\r\n      setTimeout(()=> {\r\n        this.orderEmpty = false;\r\n      }, 2000);\r\n      return;\r\n    }\r\n    if (this.orderEmpty) return;\r\n    if (this.fantasyName == \"\") {\r\n      this.client = false;\r\n      setTimeout(()=> {\r\n          this.client = true;\r\n        }, 2000);\r\n      return;\r\n    }\r\n\r\n    this.showOrder= !this.showOrder;\r\n  }\r\n\r\n  createOrder() {\r\n    let clientOk = false;\r\n    for (let i=0;i<this.clients.length;i++) {\r\n      if (this.fantasyName.toLowerCase().includes(this.clients[i].payload.val().fantasyName.toLowerCase()))\r\n      clientOk = true;\r\n    }\r\n    if (clientOk) {\r\n      if (confirm('Está segur@ que quiere crear el pedido? No podrá modificarlo')) {\r\n        this.orderService.createOrder(this.order[this.orderIndex].payload.val().sellerName, this.fantasyName, this.iva, this.orderProducts, this.quantity, this.date);\r\n        this.fantasyName = \"\";\r\n        this.router.navigateByUrl('/orders/orders');\r\n        this.orderService.resetOrder(this.orderIndex);\r\n      }\r\n      return;\r\n    }\r\n    confirm('El cliente es incorrecto')\r\n  }\r\n\r\n  reset() {\r\n    if (confirm('Está segur@ que quiere anular el pedido que no ha creado?')) {\r\n      this.quantity = 0;\r\n    for (let i=0;i<this.orderProducts.length;i++) {\r\n      this.orderProducts[i].quantity = 0;\r\n    }\r\n    this.showOrder=false;\r\n    this.orderService.resetOrder(this.orderIndex);\r\n    this.fantasyName = \"\";\r\n    }\r\n  }\r\n\r\n  discount(e: any, p: any, disc: number) {\r\n    for (let i=0;i<this.orderProducts.length;i++) {\r\n      if (p.product.title == this.orderProducts[i].product.title) {\r\n        this.orderProducts[i].discount = disc;\r\n        this.orderProducts[i].discountPrice = this.orderProducts[i].price*(1 - disc/100);\r\n        this.disc = 0 ;\r\n        break\r\n      }\r\n    }\r\n  }\r\n\r\n  updatePrices() {\r\n    // this.clientCategory = null;\r\n  }\r\n\r\n  getStock(product: any) {\r\n    return this.orderService.getStock(product);\r\n  }\r\n\r\n  @HostListener('window:beforeunload', ['$event'])\r\n  unloadHandler(event: Event) {\r\n    this.orderService.clearOrder();\r\n  }\r\n\r\n  //funciones paginator bootstrap\r\n  prevPage() {\r\n    if (this.actualPage == 0) return\r\n    this.actualPage -= 1;\r\n    this.refreshPages()\r\n  }\r\n\r\n  nextPage() {\r\n    if (this.actualPage == this.totalPages) return\r\n    this.actualPage += 1;\r\n    this.refreshPages();\r\n  }\r\n\r\n  refreshPages() {\r\n    this.totalPages = Math.ceil(this.showedProducts.length/this.itemsPerPage);\r\n    this.currentItemsToShow = []\r\n    for (let i = this.actualPage*this.itemsPerPage; i<this.actualPage*this.itemsPerPage + this.itemsPerPage; i++) {\r\n      if (i == this.showedProducts.length) return\r\n      this.currentItemsToShow.push(this.showedProducts[i])\r\n    }\r\n  }\r\n  //funciones paginator bootstrap\r\n\r\n  ngOnDestroy() {\r\n    this.orderService.clearOrder();\r\n    this.subscription.unsubscribe();\r\n    this.subscription2.unsubscribe();\r\n    this.subscription3.unsubscribe();\r\n    this.subscription4.unsubscribe();\r\n    this.subscription5.unsubscribe();\r\n  }\r\n}\r\n","<div class=\"SCContainer\">\r\n  <h3 *ngIf=\"catNull\">No se encontró la categoría del cliente, intente nuevamente</h3>\r\n  <div *ngIf=\"!catNull\">\r\n    <div class=\"row\">\r\n      <div class=\"col-3 ms-3\"><h1>PEDIDO</h1></div>\r\n      <div class=\"col ms-1 d-lg-none\"><mat-icon class=\"cart\">shopping_cart</mat-icon></div>\r\n    </div>\r\n    <hr>\r\n    <div [hidden]=\"showOrder\" id='productsList'>\r\n      <form>\r\n        <mat-form-field class=\"example-full-width me-1\" appearance=\"fill\">\r\n          <mat-label>Cliente</mat-label>\r\n          <input type=\"text\" placeholder=\"Elija uno\" aria-label=\"Number\" matInput\r\n            [formControl]=\"myControl\" [matAutocomplete]=\"auto\" [(ngModel)]=\"fantasyName\">\r\n          <mat-autocomplete #auto=\"matAutocomplete\">\r\n            <mat-option *ngFor=\"let client of this.filteredOptions | async\" [value]=\"client.payload.val().fantasyName\">\r\n              {{client.payload.val().fantasyName}}\r\n            </mat-option>\r\n          </mat-autocomplete>\r\n        </mat-form-field>\r\n\r\n        <mat-form-field *ngIf='appUser?.isAdmin' appearance=\"fill\" class=\"example-full-width \">\r\n          <mat-label>Ingrese la fecha</mat-label>\r\n          <input matInput [(ngModel)]=\"date\" [matDatepicker]=\"picker\" name=\"date\" required>\r\n          <mat-datepicker-toggle matSuffix [for]=\"picker\"></mat-datepicker-toggle>\r\n          <mat-datepicker #picker></mat-datepicker>\r\n        </mat-form-field>\r\n\r\n        <!-- <button *ngIf='!this.clientCategory' class=\"left-btn ms-2\" (click)=\"pickClient()\" mat-raised-button color=\"basic\">Siguiente</button> -->\r\n      </form>\r\n\r\n      <div *ngIf='this.clientCategory'>\r\n        <product-filter></product-filter>\r\n        <div class=\"row mt-5 mt-sm-3\" id=\"start\">\r\n          <div class=\"col-4 col-sm-3 mt-3 col-lg-3\">\r\n            <div class=\"input-group\">\r\n              <div>\r\n                <mat-icon matSuffix>search</mat-icon>\r\n              </div>\r\n              <div><input matInput class=\"border-end-0 border rounded-pill\" #prodQuery (keyup)=\"filter(prodQuery.value)\" type=\"text\" placeholder=\"   Buscar producto...\"></div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"col-8 col-sm-4 col-lg-3\">\r\n            <div class=\"row mt-2\">\r\n              <div class=\"col col-sm-6 col-lg-5\">\r\n                <button class=\"left-btn ms-2\" (click)=\"beforeShowOrder()\" mat-raised-button color=\"basic\">Crear Pedido</button>\r\n              </div>\r\n              <div class=\"col\">\r\n                <button class=\"left-btn ms-lg-4\" (click)=\"reset()\" mat-raised-button color=\"warn\">Anular </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col mt-3 mt-sm-0\">\r\n            <div class=\"row mt-2\">\r\n              <div class=\"mt-1 col-2 col-sm-2 col-lg-1\">\r\n                <label id=\"example-radio-group-label\"><b>IVA:</b></label>\r\n              </div>\r\n              <div class=\"col\">\r\n                <mat-radio-group *ngIf=\"this.clientCategory!='Gimnasio' && this.clientCategory!='Kiosko'\" aria-labelledby=\"example-radio-group-label\" class=\"example-radio-group\" [(ngModel)]=\"this.iva\">\r\n                  <mat-radio-button style=\"margin:5px\" class=\"example-radio-button\" *ngFor=\"let iva of ivas\" [value]=\"iva\">\r\n                    {{iva}}%\r\n                  </mat-radio-button>\r\n                </mat-radio-group>\r\n              </div>\r\n\r\n            </div>\r\n\r\n            <span *ngIf=\"this.clientCategory =='Gimnasio' || this.clientCategory =='Kiosko'\" class=\"text-danger border border-danger p-2 pe-4 rounded\">&nbsp;&nbsp;&nbsp;&nbsp;*Gimnasios y Kiosko IVA 0%</span>\r\n            <span *ngIf=\"!client\" class=\"text-danger border border-danger p-2 pe-4 rounded\">&nbsp;&nbsp;&nbsp;&nbsp;*Especifique el cliente para operar</span>\r\n            <span *ngIf=\"orderEmpty\" class=\"text-danger border border-danger p-2 pe-4 rounded\">&nbsp;&nbsp;&nbsp;&nbsp;*Haga el pedido</span>\r\n            <span *ngIf=\"noStock\" class=\"text-danger border border-danger p-2 pe-4 rounded\">&nbsp;&nbsp;&nbsp;&nbsp;*No hay stock suficiente de al menos uno de los productos seleccionados</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"my-3\">\r\n        <span *ngIf='!this.clientCategory'>----------PRIMERO SELECCIONE EL CLIENTE PARA COMENZAR A OPERAR----------</span>\r\n      </div>\r\n      <hr>\r\n      <table *ngIf='this.clientCategory' matSort (matSortChange)=\"sortData($event)\">\r\n        <tr>\r\n          <th mat-sort-header=\"title\">Producto</th>\r\n          <th id=\"quantity\" mat-sort-header=\"quantity\">Cantidad</th>\r\n          <th mat-sort-header=\"stock\">Stock</th>\r\n          <th mat-sort-header=\"unitPrice\">Precio unitario {{this.clientCategory}}&nbsp;s/iva</th>\r\n          <th mat-sort-header=\"totalPriceProduct\">Subtotal</th>\r\n          <th mat-sort-header=\"quit\">&nbsp;&nbsp;&nbsp;Quitar</th>\r\n          <th mat-sort-header=\"add\">&nbsp;Agregar</th>\r\n          <th mat-sort-header=\"discount\">&nbsp;Descuento(%)</th>\r\n        </tr>\r\n\r\n        <tr *ngFor=\"let p of currentItemsToShow; let i = index\">\r\n          <td>{{p.product.title}}&nbsp;&nbsp;&nbsp;&nbsp;</td>\r\n          <td>{{p.quantity}}</td>\r\n          <td>{{getStock(p)}}</td>\r\n          <td>${{p.discountPrice | number : '1.1-1'}}</td>\r\n          <td>${{p.discountPrice*p.quantity | number:'1.1-1'}}</td>\r\n          <td><button class=\"left-btn\" (click)=\"updateOrderItemQuantity(p, -1, i)\" mat-raised-button color=\"basic\">-</button></td>\r\n          <td><button class=\"left-btn\" (click)=\"updateOrderItemQuantity(p, 1, i)\" mat-raised-button color=\"basic\">+</button></td>\r\n          <td>\r\n            <form id=\"form\" (submit)=\"discount($event, p, +disc.value)\">\r\n                <input type=\"number\" #disc value={{p.value}}>\r\n                <button *ngIf=\"this.order.length > this.orderIndex && p.discount==0\" type=\"submit\">Aplicar</button>\r\n                <button *ngIf=\"this.order.length > this.orderIndex && p.discount!=0\" (click)=\"discount($event, p, 0)\">Anular</button>\r\n                <span *ngIf=\"this.order.length > this.orderIndex && p.discount!=0\">&nbsp;&nbsp;Descuento: {{p.discount}}%</span>\r\n            </form>\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <th mat-sort-header=\"total\">UNIDADES TOTALES</th>\r\n          <th mat-sort-header=\"showTotalQuantity\">{{this.quantity}}&nbsp; Unidades</th>\r\n          <th mat-sort-header=\"totalPrice\">IMPORTE TOTAL(incluye el IVA)</th>\r\n          <th mat-sort-header=\"showTotal\">${{this.ordersService.getTotalAmount(this.orderProducts)*(1+this.iva/100) | number:'1.1-1'}}</th>\r\n        </tr>\r\n      </table>\r\n      <div *ngIf='this.clientCategory' class=\"ms-3\">\r\n        <button class=\"left-btn\" (click)=\"beforeShowOrder()\" mat-raised-button color=\"basic\">Crear Pedido</button>\r\n        <button class=\"left-btn\" (click)=\"reset()\" mat-raised-button color=\"warn\">Anular </button>\r\n\r\n        <span *ngIf=\"!client\">&nbsp;&nbsp;&nbsp;&nbsp;*Especifique el cliente</span>\r\n        <span *ngIf=\"orderEmpty\">&nbsp;&nbsp;&nbsp;&nbsp;*Haga el pedido</span>\r\n        <span *ngIf=\"noStock\">&nbsp;&nbsp;&nbsp;&nbsp;*No hay stock suficiente de al menos uno de los productos seleccionados</span>\r\n        <span *ngIf=\"this.clientCategory=='Gimnasio' || this.clientCategory=='Kiosko'\">&nbsp;&nbsp;&nbsp;&nbsp;*Gimnasios y Kioskos 0% IVA</span>\r\n\r\n        <nav class=\"mb-3 mt-3\" aria-label=\"Page navigation example\">\r\n          <ul class=\"pagination\">\r\n            <li class=\"page-item disabled\"><a class=\"page-link\">Página actual <strong>{{actualPage + 1}}</strong></a></li>\r\n            <li class=\"page-item disabled me-1\"><a class=\"page-link\">Total <strong>{{totalPages}}</strong></a></li>\r\n            <li *ngIf=\"actualPage > 0\" class=\"page-item\"><a class=\"page-link\" (click)=\"prevPage()\"><< Anterior</a></li>\r\n            <li *ngIf=\"actualPage < totalPages -1\" class=\"page-item\"><a class=\"page-link\" (click)=\"nextPage()\">Próxima >></a></li>\r\n            <li class=\"page-item ms-3\" [ngClass]=\"{'disabled': itemsPerPage == 10}\"><a class=\"page-link\" (click)=\"this.itemsPerPage=10;this.actualPage =0;refreshPages()\">10 por página</a></li>\r\n            <li class=\"page-item\" [ngClass]=\"{'disabled': itemsPerPage == 20}\"><a class=\"page-link\" (click)=\"this.itemsPerPage=20;this.actualPage =0;refreshPages()\">20 por página</a></li>\r\n          </ul>\r\n        </nav>\r\n      </div>\r\n      <br>\r\n    </div>\r\n\r\n    <div *ngIf=\"showOrder\" id='productsList' class=\"row\">\r\n      <div>\r\n        <button *ngIf=\"this.ordersService.clients\" class=\"left-btn\" (click)=\"createOrder()\" mat-raised-button color=\"basic\">Crear Pedido</button>\r\n        <button class=\"left-btn\" (click)=\"this.showOrder= !this.showOrder;\" mat-raised-button color=\"warn\">Volver </button>\r\n        <br>\r\n        <br>\r\n        <tr>\r\n          <th>Producto</th>\r\n          <th>Cantidad</th>\r\n        </tr>\r\n        <tr *ngFor=\"let p of orderProducts; let i = index\">\r\n          <td *ngIf=\"p.quantity!=0\">{{p.product.title}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>\r\n          <td *ngIf=\"p.quantity!=0\">{{p.quantity}}</td>\r\n        </tr>\r\n        <br>\r\n        <br>\r\n        <button *ngIf=\"orderProductsLength() > 10 && this.ordersService.clients\" class=\"left-btn\" (click)=\"createOrder()\" mat-raised-button color=\"basic\">Crear Pedido</button>\r\n        <button *ngIf=\"orderProductsLength() > 10\" class=\"left-btn\" (click)=\"this.showOrder= !this.showOrder;\" mat-raised-button color=\"warn\">Volver </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n","import { Subscription } from 'rxjs';\r\nimport { Injectable, OnDestroy } from '@angular/core';\r\nimport { ProductService } from './product.service';\r\nimport { AngularFireDatabase } from '@angular/fire/database';\r\nimport { Product } from '../models/product';\r\nimport { Order } from '../models/order';\r\nimport { AuthService } from './auth.service';\r\nimport { AppUser } from '../models/app-user';\r\nimport { OrdersService } from './orders.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class OrderService implements OnDestroy{\r\n\r\n  appUser: AppUser;\r\n  hasDiscount: boolean = false;\r\n  order: any;\r\n  orderId: string;\r\n  orderIndex: number = -1;\r\n  products: any[]\r\n  orderNumber: any = [];\r\n  subscription: Subscription;\r\n  subscription2: Subscription;\r\n\r\n  constructor(\r\n    private auth: AuthService,\r\n    private db: AngularFireDatabase,\r\n    private ordersService: OrdersService,\r\n    private productService: ProductService,\r\n  )\r\n  {\r\n    console.log('order service constructor');\r\n    this.subscription2 = this.productService.getAllProducts().subscribe((products) =>{\r\n      this.products = products;\r\n    })\r\n    this.appUser = this.ordersService.appUser;\r\n    const subscription = this.getOrder().subscribe((order: any) => {\r\n      this.order = order;\r\n      for (let i=0;i<this.order.length;i++) {\r\n        if (this.order && this.appUser && this.order[i].payload.val().seller == this.appUser.name) {\r\n          this.orderIndex = i\r\n          this.orderId =  this.order[i].key;\r\n          break\r\n        }\r\n      }\r\n    })\r\n    if (!this.order) this.createOrderEmpty(); // pruebo esto\r\n  }\r\n\r\n   // ................................................order methods................................................\r\n\r\n  isProductStock(cartProduct: any) {\r\n    for (let i=0;i<this.products.length;i++) {\r\n      if (this.products[i].title == cartProduct.title && this.products[i].stock < cartProduct.quantity) return false\r\n    }\r\n    return true\r\n  }\r\n\r\n  isStock(cartOrder: any) {\r\n    for (let i=0;i<cartOrder.payload.val().products.length;i++) {\r\n      if (cartOrder.payload.val().products[i].quantity > 0 && !this.isProductStock(cartOrder.payload.val().products[i])) {\r\n        return false\r\n      }\r\n    }\r\n    return true\r\n  }\r\n\r\n  getStock(product: any) {\r\n    if (this.products) {\r\n      for (let i=0;i<this.products.length;i++) {\r\n        if (this.products[i].payload.val().title == product.product.title) return this.products[i].payload.val().stock\r\n      }\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  createOrderEmpty() {\r\n    if (!this.appUser) return;\r\n    if (!this.products) return;\r\n    let products = []\r\n    for (let i=0;i<this.products.length;i++) {\r\n      products.push({\r\n        \"price\": this.products[i].payload.val().discPrice1,\r\n        \"discountPrice\": this.products[i].payload.val().discPrice1,\r\n        \"product\": this.products[i].payload.val(),\r\n        \"productId\":this.products[i].key,\r\n        \"quantity\": 0,\r\n        \"discount\": 0\r\n      })\r\n    }\r\n    let result = this.db.list('/order/').push({\r\n      \"orderItemsCount\":0,\r\n      \"products\": products,\r\n      \"sellerName\": this.appUser.name,\r\n    });\r\n  }\r\n\r\n  public createOrderNumber() {\r\n    let result = this.db.list('/orderNumber/').push({\r\n      \"orderNumber\": 0\r\n    });\r\n  }\r\n\r\n  resetOrder(orderIndex: any){\r\n    this.db.object('/order/'+ this.order[orderIndex].key).remove();\r\n  }\r\n\r\n  clearOrder() {\r\n    //this.db.object('/order/').remove(); elimina todo \"order\" de la base\r\n    if (!this.order) return;\r\n    for (let i=0;i<this.order.length;i++) {\r\n      if (this.order[i].payload.val().seller == this.appUser?.name) this.db.object('/order/'+ this.order[i].key).remove();\r\n    }\r\n  }\r\n\r\n  getOrder() {\r\n    let result = this.db.list('/order').snapshotChanges();\r\n    return result;\r\n  }\r\n\r\n  getOrderNumber() {\r\n    let result = this.db.list('/orderNumber').snapshotChanges();\r\n    return result;\r\n  }\r\n\r\n  updateOrderItemQuantity(order:any, product:any, change: number, orderIndex: number){\r\n    for (let i=0;i<this.products.length;i++) {\r\n      if (product.productId == order[orderIndex].payload.val().products[i].productId) {\r\n        this.db.object('/order/' + order[orderIndex].key +'/products/' + i).update({\r\n          \"quantity\": order[orderIndex].payload.val().products[i].quantity + change\r\n        });\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  createOrder(seller: string, fantasyName: string, iva: number, cartOrder: any, quantity: number, date: any) {\r\n    let prods: Product[] = [];\r\n    let clientCategory = this.ordersService.getClientCategory(fantasyName);\r\n    let amount = 0;\r\n    for (let i=0;i<cartOrder.length;i++) {\r\n      if (parseInt(cartOrder[i].quantity) != 0) { //solo guardo los prod con quant > 0\r\n        prods.push({\r\n          \"title\": cartOrder[i].product.title,\r\n          \"category\": cartOrder[i].product.prodsCategory,\r\n          \"discountPrice\": cartOrder[i].discountPrice,\r\n          \"discount\" : cartOrder[i].discount,\r\n          \"quantity\": cartOrder[i].quantity,\r\n          \"productId\": cartOrder[i].productId\r\n        });\r\n        amount += parseInt(cartOrder[i].quantity) * parseFloat(cartOrder[i].discountPrice) * (1 + iva/100);\r\n        if (parseFloat(cartOrder[i].discount) != 0) this.hasDiscount = true;\r\n      }\r\n      // else if (cartOrder[i].quantity != 0) {\r\n      //   prods.push({\r\n      //     \"title\": cartOrder[i].product.title,\r\n      //     \"category\": cartOrder[i].product.prodsCategory,\r\n      //     \"discountPrice\": cartOrder[i].discountPrice,\r\n      //     \"discount\" : cartOrder[i].discount,\r\n      //     \"quantity\": cartOrder[i].quantity\r\n      //   });\r\n      // }\r\n    }\r\n\r\n    let result = this.db.list('/ordersDetail/').push({\r\n      \"products\": prods\r\n    })\r\n\r\n    let time = new Date();\r\n    time.getHours();\r\n    //time.getMinutes();\r\n    let inDebt = this.ordersService.isClientInDebt(fantasyName, this.ordersService.orders);\r\n    let isAproved =  inDebt && time.getHours()<=20; //si los hacen despues de las 21 salen sin aprobacion\r\n\r\n    if (iva != 21 && clientCategory!=\"Gimnasio\" && clientCategory!=\"Kiosko\") isAproved = false;\r\n    if (date == null) {\r\n      date = time.getTime();\r\n    }\r\n    else date = date.unix()*1000;\r\n    if (amount) amount = Math.round(amount * 10) / 10;\r\n\r\n    if (result.key) {\r\n      let order: Order = {\r\n        \"amountWithIva\": amount,\r\n        \"aproved\": isAproved,\r\n        \"clientInDebt\": inDebt,\r\n        \"date\": date,\r\n        \"fantasyName\": fantasyName,\r\n        \"hasDiscount\": this.hasDiscount,\r\n        \"iva\": iva,\r\n        \"orderDetailKey\": result.key,\r\n        \"seller\": seller,\r\n        \"orderNumber\": this.orderNumber[0].payload.val().orderNumber\r\n      }\r\n      this.db.list('/orders/').push(order)\r\n    }\r\n    else console.log('la operacion de guardado de la orden falló');\r\n\r\n    this.incrementOrderNumber();\r\n    this.productService.updateStocks(prods, this.products, false);\r\n  }\r\n\r\n  incrementOrderNumber() {\r\n    let orderNumb = parseInt(this.orderNumber[0].payload.val().orderNumber) + 1;\r\n    return this.db.object('/orderNumber/' + this.orderNumber[0].key).update({\"orderNumber\": orderNumb});\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n      this.subscription.unsubscribe();\r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///"}